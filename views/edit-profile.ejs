<h2>Edit Profile</h2>

<% if (typeof errors !== 'undefined' && errors.length > 0) { %>
<div class="errors">
	<ul>
		<% errors.forEach(function(err) { %>
		<li><%= err %></li>
		<% }); %>
	</ul>
</div>
<% } %>

<form action="/profile/edit" method="POST" class="form-register">
	<div class="field">
		<label for="name">Name *</label>
		<input
			type="text"
			id="name"
			name="name"
			value="<%= user.name %>"
			required />
	</div>

	<div class="field">
		<label for="email">Email</label>
		<input
			type="email"
			id="email"
			value="<%= user.email %>"
			disabled />
		<small>Email cannot be changed</small>
	</div>

	<div class="field">
		<label for="age">Age *</label>
		<input
			type="number"
			id="age"
			name="age"
			value="<%= user.age %>"
			min="1"
			required />
	</div>

	<div class="field">
		<label for="city">City</label>
		<input
			type="text"
			id="city"
			name="city"
			value="<%= user.city || '' %>" />
	</div>

	<div class="field">
		<label>Interests</label>
		<div class="checkboxes">
			<label>
				<input type="checkbox" name="interests" value="meditation"
					<%= user.interests?.includes('meditation') ? 'checked' : '' %> />
				Meditation
			</label>
			<label>
				<input type="checkbox" name="interests" value="energy_healing"
					<%= user.interests?.includes('energy_healing') ? 'checked' : '' %> />
				Energy Healing
			</label>
			<label>
				<input type="checkbox" name="interests" value="chakras"
					<%= user.interests?.includes('chakras') ? 'checked' : '' %> />
				Chakras
			</label>
			<label>
				<input type="checkbox" name="interests" value="astral_journey"
					<%= user.interests?.includes('astral_journey') ? 'checked' : '' %> />
				Astral Journey
			</label>
			<label>
				<input type="checkbox" name="interests" value="regression_therapy"
					<%= user.interests?.includes('regression_therapy') ? 'checked' : '' %> />
				Regression Therapy
			</label>
		</div>
	</div>

	<div class="form-actions">
		<button type="submit">Save Changes</button>
		<a href="/profile" class="button button-secondary">Cancel</a>
	</div>
</form>
