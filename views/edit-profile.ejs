<div class="auth-container">
  <div class="auth-card">
    <h2 class="section-title" style="margin-bottom: 24px; font-size: 2rem;">Edit Profile</h2>

    <% if (typeof errors !== 'undefined' && errors && errors.length > 0) { %>
    <div class="errors">
      <ul>
        <% errors.forEach(function(err) { %>
        <li><%= typeof err === 'string' ? err : err.msg %></li>
        <% }); %>
      </ul>
    </div>
    <% } %>

    <form action="/profile/edit" method="POST" class="form-auth">
      <div class="field">
        <label for="name">Name *</label>
        <input
          type="text"
          id="name"
          name="name"
          value="<%= user.name %>"
          required />
      </div>

      <div class="field">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          value="<%= user.email %>"
          disabled 
          style="opacity: 0.7; cursor: not-allowed;" />
        <small style="display: block; margin-top: 4px; color: var(--text-muted); font-size: 0.8rem;">Email cannot be changed</small>
      </div>

      <div class="field">
        <label for="age">Age *</label>
        <input
          type="number"
          id="age"
          name="age"
          value="<%= user.age %>"
          min="1"
          required />
      </div>

      <div class="field">
        <label for="city">City</label>
        <input
          type="text"
          id="city"
          name="city"
          value="<%= user.city || '' %>" />
      </div>

      <div class="field">
        <label>Interests</label>
        <div class="checkboxes" style="display: flex; flex-direction: column; gap: 8px;">
          <% 
            const userInterests = user.interests || [];
            const interestsOptions = [
              { value: 'meditation', label: 'Meditation' },
              { value: 'energy_healing', label: 'Energy Healing' },
              { value: 'chakras', label: 'Chakras' },
              { value: 'astral_journey', label: 'Astral Journey' },
              { value: 'regression_therapy', label: 'Regression Therapy' }
            ];
          %>
          <% interestsOptions.forEach(opt => { %>
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" name="interests" value="<%= opt.value %>" 
                <%= userInterests.includes(opt.value) ? 'checked' : '' %> /> 
              <%= opt.label %>
            </label>
          <% }); %>
        </div>
      </div>

      <div class="form-actions" style="margin-top: 32px; display: flex; gap: 16px;">
        <button type="submit" class="btn" style="flex: 1;">Save Changes</button>
        <a href="/profile" class="btn btn-outline" style="flex: 1; text-align: center; border: 1px solid var(--card-border); color: var(--text-main);">Cancel</a>
      </div>
    </form>
  </div>
</div>

<style>
  .auth-container {
    display: flex;
    justify-content: center;
    padding: 40px 0;
  }
  .auth-card {
    background: var(--card-bg);
    border: 1px solid var(--card-border);
    border-radius: var(--radius-lg);
    padding: 48px;
    backdrop-filter: blur(12px);
    box-shadow: var(--card-shadow);
    width: 100%;
    max-width: 600px;
  }
</style>
